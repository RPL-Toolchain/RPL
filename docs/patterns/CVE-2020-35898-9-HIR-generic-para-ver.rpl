pattern CVE-2020-35898/9

patt {
    use std::cell::UnsafeCell;
    use std::rc::Rc;

    p_rc_unsafe_cell_generic_para_ver = {
        #[
            $T: Index
        ]
        pub struct $Cell<$T> {             // 在模式中的Cell<$T> 一定会捕获到具有范型参数的$Cell版本
            $inner: Rc<UnsafeCell<$T>>,
        }

        #[
            $T: Index + Clone
        ]
        impl Clone for $Cell<$T> {
            fn clone(&self) -> Self {
                $Cell::#new!{
                    $inner: self.$inner.clone(),
                }
            }
        }

        impl $Cell {
            fn $get_mut(&mut self) -> &mut $T {
                @let $res = *self.$inner;
                @let $res = $res.as_ref();
                @let $res = $res.get();
                $res
            }
        }
    }
}



